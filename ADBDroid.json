
    { "name":"ADBdroid",
      "manufacturer":"TonO",
      "type":"TV",
      "version":8,
      "discover":{
        "welcomeheadertext":"Choose your Android Instance",
        "welcomedescription":"powered by meta\nby JAC459/TonO",
        "command": {
          "type": "static",
          "command": "$LocalByMacDevices",
          "queryresult": [
            "$.*"
         ]
        }  
      },
      "template" : {
         "name": "ADBdroid",
         "type":"TV",
         "dynamicname": "DYNAMIK_INST_START DYNAMIK \"ADB \"+ JSON.parse(\"$Result\").ip DYNAMIK_INST_END",
         "dynamicid": "DYNAMIK_INST_START DYNAMIK JSON.parse(\"$Result\").ip DYNAMIK_INST_END",
         "manufacturer": "TonO",
         "version": 8,
         "listeners" : {
          "ADBInfo" : 
             {"label":"",
               "type":"webSocket", "command":{"connection":"ws://localhost:8765", "message": "message"}, "queryresult" : "",          
             "evalwrite" : [{"variable" : "ActionStatus",     "value" : "DYNAMIK \"$Result\""}],
              "evaldo":[{"test": "DYNAMIK ((\"$Result\").trim().substring(0, 13)==\"mCurrentFocus\")","then": "___Showfocus"}]
             }
         },
    
       "variables":{
        "ADBTarget":"DYNAMIK_INST_START DYNAMIK  \"method=adb&host=\"+JSON.parse(\"$Result\").ip DYNAMIK_INST_END",
        "PythonDriver":"ws://localhost:8765",
         "ADBTargetPORT":"5555",
         "MyStatus":"", 
         "ADBKeyCMD": "&command=input keyevent ",
         "ADBAPPCMD": "&command=",
         "ADBRunAsRoot":"&runasroot=yes",
         "INTENT_LAUNCH" : "android.intent.category.LAUNCHER",
         "App_Start": "monkey -p $MyAPP -c android.intent.category.LAUNCHER 1",
         "App_Stop" : "am force-stop",
         "KODI-start": "monkey -p org.xbmc.kodi -c android.intent.category.LAUNCHER 1",
         "KODI-stop": "am force-stop org.xbmc.kodi",
         "Status":"",
         "ActionStatus":"",
         "Power": 26,
         "Sleep":  223,
         "Play Pause": 85,
         "Play": 126,
         "Pause": 127,
         "ChannelUp":166,
         "ChannelDown":167,
         "VolumeUp": 24,
         "VolumeDown": 25,
         "Home": 3,
         "MuteToggle":91,
         "Back":4,
         "Menu": 1,
         "KEY": "input keyevent ",
         "FunctionGreen":184,
         "FunctionRed":183,
         "FunctionBlue":186,
         "FunctionYellow":185,
         "Digit0":7,
         "Digit1":8,
         "Digit2": 9,
         "Digit3": 10,
         "Digit4": 11,
         "Digit5": 12,
         "Digit6": 13,
         "Digit7": 14,
         "Digit8": 15,
         "Digit9": 16,
         "CursorDown": 20,
         "CursorUp":19,
         "CursorLeft": 21,
         "CursorRight": 22,
         "CursorEnter": 66,
         "CURRENT_APP_CMD" : "dumpsys window windows | grep mCurrentFocus"
       },
       "labels":{  
         "Status" : {"label":"ActionStatus", "listen":"ActionStatus", "actionlisten":"ActionStatus"}
       },
       "buttons":{
   
         "POWER ON":           {"type":"static","command":"","evaldo":[{"test":true,"then": "__INITIALISE"}]},
         "POWER OFF":           {"type":"static","command":"","evaldo":[{"test":true,"then": "__CLEANUP"}]},
         "__INITIALISE":    {"type":"static","command":""},
         "Power Toggle":    {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Power"},          "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "CURSOR UP":       {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$CursorUp"},       "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "CURSOR DOWN":     {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$CursorDown"},     "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "CURSOR LEFT":     {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$CursorLeft"},     "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "CURSOR RIGHT":    {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$CursorRight"},    "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "CURSOR ENTER":    {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$CursorEnter"},    "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "CHANNEL UP":      {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$ChannelUp"},      "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "CHANNEL DOWN":    {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$ChannelDown"},    "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "HOME":            {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Home"},           "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "VOLUME UP":       {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$VolumeUp"},       "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "VOLUME DOWN":     {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$VolumeDown"},     "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "PLAY":            {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Play"},           "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "PAUSE":           {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Pause"},          "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "STOP":            {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Stop"},           "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "MENU":            {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Menu"},           "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "BACK":            {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Back"},           "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "FUNCTION RED":    {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$FunctionRed"},    "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "FUNCTION GREEN":  {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$FunctionGreen"},  "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "FUNCTION BLUE":   {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$FunctionBlue"},   "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "FUNCTION YELLOW": {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$FunctionYellow"}, "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "MUTE TOGGLE":     {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Mute"},           "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 0":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit0"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 1":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit1"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 2":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit2"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 3":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit3"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 4":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit4"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 5":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit5"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 6":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit6"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 7":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit7"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 8":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit8"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "DIGIT 9":         {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Digit9"},         "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "Sleep":           {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBKeyCMD$Sleep"},          "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "Current APP":     {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBAPPCMD$CURRENT_APP_CMD"}},
         "Start KODI":      {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBAPPCMD$KODI-start"},     "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "Stop KODI":       {"type":"webSocket", "command":{"connection":"$PythonDriver", "message":"$ADBTarget$ADBAPPCMD$KODI-stop"},      "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "$Result"}]},
         "___Showfocus":    {"type":"static", "command":"", "queryresult":"",  "evalwrite":[{"variable": "ActionStatus","value": "DYNAMIK (\"$ActionStatus\").trim().substring(14, 999).split(' ')[2]"}]}

        }
     
   }
 }
